{
    "docs": [
        {
            "location": "/",
            "text": "\u6b22\u8fce\u6765\u5230OpenAPI\u7684\u6587\u6863\n\n\n\u7b80\u4ecb\n\n\nOpenAPI\u9879\u76ee\u662f\u7528\u4e8e\u5185\u7f51\u6570\u636e\u91c7\u96c6\u7684\u9879\u76ee\u3002\u83b7\u53d6Java\u540e\u53f0\u7684\u4efb\u52a1\u6570\u636e\u540e\uff0c\u8fdb\u884c\u5185\u7f51\u6570\u636e\u7684\u91c7\u96c6\u3002\u9664\u4e86\u6570\u636e\u91c7\u96c6\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u5c01\u88c5\u4e86\u8d26\u53f7\u5bc6\u7801\u7684\u9a8c\u8bc1\uff0c\u6570\u636e\u56de\u63a8\u7684\u65b9\u6cd5\uff0c\u591a\u8fdb\u7a0b\u591a\u4efb\u52a1\u91c7\u96c6\uff0c\u8d26\u53f7\u8fc7\u671f\u7684\u9a8c\u8bc1\u7b49\u529f\u80fd\u3002\u7b80\u5316\u4e86\u5185\u7f51\u91c7\u96c6\u6570\u636e\u722c\u866b\u4e0e\u540e\u53f0\u4ea4\u6362\u6570\u636e\u7684\u6d41\u7a0b\u3002\n\n\n\u76ee\u5f55\n\n\n\n\n\u67e5\u770b\u5982\u4f55\u4e0eJava\u540e\u53f0\u7684\u63a5\u53e3\u901a\u8baf\nJava\u63a5\u53e3\n  \n\n\n\u67e5\u770bpython\u63a5\u53e3\u4f7f\u7528\u65b9\u6cd5\nPython\u4f7f\u7528\n   \n\n\n\u5b8c\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u4e00\u4e2a\u5de5\u4f5c\u6d41\u7a0b\ndowork",
            "title": "home"
        },
        {
            "location": "/#openapi",
            "text": "",
            "title": "\u6b22\u8fce\u6765\u5230OpenAPI\u7684\u6587\u6863"
        },
        {
            "location": "/#_1",
            "text": "OpenAPI\u9879\u76ee\u662f\u7528\u4e8e\u5185\u7f51\u6570\u636e\u91c7\u96c6\u7684\u9879\u76ee\u3002\u83b7\u53d6Java\u540e\u53f0\u7684\u4efb\u52a1\u6570\u636e\u540e\uff0c\u8fdb\u884c\u5185\u7f51\u6570\u636e\u7684\u91c7\u96c6\u3002\u9664\u4e86\u6570\u636e\u91c7\u96c6\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u5c01\u88c5\u4e86\u8d26\u53f7\u5bc6\u7801\u7684\u9a8c\u8bc1\uff0c\u6570\u636e\u56de\u63a8\u7684\u65b9\u6cd5\uff0c\u591a\u8fdb\u7a0b\u591a\u4efb\u52a1\u91c7\u96c6\uff0c\u8d26\u53f7\u8fc7\u671f\u7684\u9a8c\u8bc1\u7b49\u529f\u80fd\u3002\u7b80\u5316\u4e86\u5185\u7f51\u91c7\u96c6\u6570\u636e\u722c\u866b\u4e0e\u540e\u53f0\u4ea4\u6362\u6570\u636e\u7684\u6d41\u7a0b\u3002",
            "title": "\u7b80\u4ecb"
        },
        {
            "location": "/#_2",
            "text": "\u67e5\u770b\u5982\u4f55\u4e0eJava\u540e\u53f0\u7684\u63a5\u53e3\u901a\u8baf Java\u63a5\u53e3     \u67e5\u770bpython\u63a5\u53e3\u4f7f\u7528\u65b9\u6cd5 Python\u4f7f\u7528      \u5b8c\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u4e00\u4e2a\u5de5\u4f5c\u6d41\u7a0b dowork",
            "title": "\u76ee\u5f55"
        },
        {
            "location": "/api/",
            "text": "\u4e0eJava\u540e\u53f0\u5b9a\u4e49\u7684\u63a5\u53e3\n\n\n1.1 \u8f6e\u8be2\u4efb\u52a1\u63a5\u53e3\n\n\nuri\uff1a/api/task/taskManage?methodname=queryTask\n\u65b9\u6cd5\u540d\uff1aqueryTask  \n\u652f\u6301\u7248\u672c\u53f7\uff1a1.0.0\n\n\n\n\u8bf7\u6c42\u53c2\u6570\u8bf4\u660e\uff1a\n\n\n\n\n\n\n\n\n\u540d\u79f0\n\n\n\u5fc5\u586b\n\n\n\u7c7b\u578b\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nusername\n\n\n\u662f\n\n\nstring\n\n\n\u76ee\u6807\u7cfb\u7edf\u8d26\u53f7\n\n\n\n\n\n\npassword\n\n\n\u662f\n\n\nstring\n\n\n\u5bc6\u7801\n\n\n\n\n\n\nsystemName\n\n\n\u662f\n\n\nstring\n\n\n\u7cfb\u7edf\u540d\u79f0\uff08\u9644\u88683\uff09\n\n\n\n\n\n\nversion\n\n\n\u662f\n\n\nstring\n\n\n\u7248\u672c\u53f7\n\n\n\n\n\n\n\n\n\u8bf7\u6c42\u793a\u4f8b\uff1a\n\n\ndata:{\n    \"password\":\"123456\",\n    \"systemName\":\"iscm\",\n    \"version\":\"1.0.0\",\n    \"username\":\"zhangsan\"\n    }\n\n\n\n\n\u8fd4\u56de\u793a\u4f8b\uff1a\n\n\n{\n    \"msg\": \"success\",\n    \"code\": 0,\n    \"data\": {\n        \"password\": \"123456\",\n        \"systemName\": \"iscm\",\n        \"methodName\": \"queryzjsxDateByjrh\",\n        \"username\": \"zhangsan\",\n        \"params\": \"{\\\"jrh\\\":\"\",\\\"abc\\\":\"\"}\",\n        \"taskId\": \"1031354660771856384\"\n    },\n    \"timestamp\": 1534729089954\n}\n\n\n\n\n\u6ce8\u610f\uff1a\u67e5\u8be2\u4efb\u52a1\u63a5\u53e3\u7531\u4e8e\u6709\u8d26\u53f7\u5bc6\u7801\u7b49\u654f\u611f\u4fe1\u606f\uff0c\u6240\u4ee5\u8981\u5bf9\u8bf7\u6c42\u53c2\u6570data\u7684\u503c\u8fdb\u884cAES 128\u4f4d\u52a0\u5bc6\uff0c\u52a0\u5bc6\u56e0\u5b50\u53cc\u65b9\u7ea6\u5b9a\uff0c\u6d4b\u8bd5\u73af\u5883\u6682\u65f6\u662f \"abcdefg\"\n\n\n1.2 \u673a\u5668\u4eba\u901a\u77e5\u4efb\u52a1\u72b6\u6001\u63a5\u53e3\n\n\nuri\uff1a/api/task/taskManage?methodname=sendTaskStatus  \n\u65b9\u6cd5\u540d\uff1asendTaskStatus  \n\u652f\u6301\u7248\u672c\u53f7\uff1a1.0.0  \n\u8bf7\u6c42\u53c2\u6570\u8bf4\u660e\uff1a\n\n\n\n\n\n\n\n\n\n\u540d\u79f0\n\n\n\u5fc5\u586b\n\n\n\u7c7b\u578b\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\ntaskId\n\n\n\u662f\n\n\nstring\n\n\n\u4efb\u52a1Id\n\n\n\n\n\n\ntaskStatus\n\n\n\u662f\n\n\nint\n\n\n\u4efb\u52a1\u8fd0\u884c\u72b6\u6001 \uff08\u5177\u4f53\u89c1 \u9644\u88682\uff09\n\n\n\n\n\n\nremark\n\n\n\u5426\n\n\nstring\n\n\n\u5907\u6ce8\uff08\u9519\u8bef\u539f\u56e0\u6216\u5176\u4ed6\uff0c\u53ef\u4e0d\u586b\uff09\n\n\n\n\n\n\n\n\n\u8bf7\u6c42\u793a\u4f8b\uff1a\n\n\ndata:{\n    \"password\":\"123456\",\n    \"systemName\":\"iscm\",\n    \"version\":\"1.0.0\",\n    \"username\":\"zhangsan\",\n    \"params\":{\n        \"taskId\":\"1031355536785801217\",\n        \"taskStatus\":-1,\n        \"remark\":\"\u65e0\"\n        }\n    }\n\n\n\n\n\u8fd4\u56de\u793a\u4f8b\uff1a\n\n\n{\n    \"msg\": \"success\",\n    \"code\": 0,\n    \"timestamp\": 1534729366900\n}\n\n\n\n\n1.3 \u673a\u5668\u4eba\u56de\u63a8\u6570\u636e\u63a5\u53e3\n\n\nuri\uff1a/api/task/taskManage?methodname=sendTaskData\n\u65b9\u6cd5\u540d\uff1asendTaskData\n\u652f\u6301\u7248\u672c\u53f7\uff1a1.0.0\n\n\n\n\u8bf7\u6c42\u53c2\u6570\u8bf4\u660e\uff1a\n\n\n\n\n\n\n\n\n\u540d\u79f0\n\n\n\u5fc5\u586b\n\n\n\u7c7b\u578b\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\ntaskId\n\n\n\u662f\n\n\nstring\n\n\n\u4efb\u52a1Id\n\n\n\n\n\n\ntaskData\n\n\n\u662f\n\n\nstring\n\n\n\u4efb\u52a1\u6570\u636e\uff08json\u5b57\u7b26\u4e32\uff09\n\n\n\n\n\n\nremark\n\n\n\u5426\n\n\nstring\n\n\n\u5907\u6ce8\uff08\u9519\u8bef\u539f\u56e0\u6216\u5176\u4ed6\uff0c\u53ef\u4e0d\u586b\uff09\n\n\n\n\n\n\n\u8bf7\u6c42\u793a\u4f8b\uff1a\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndata:{\n    \"password\":\"123456\",\n    \"systemName\":\"iscm\",\n    \"version\":\"1.0.0\",\n    \"username\":\"zhangsan\",\n    \"params\":{\n        \"taskId\":\"1031355536785801217\",\n        \"taskData\":{\"zjsxDate\":\"2018-01-05\"},\n        \"remark\":\"\u65e0\"\n        }\n     }\n\n\n\n\n\u8fd4\u56de\u793a\u4f8b\uff1a\n\n\n{\n    \"msg\": \"success\",\n    \"code\": 0,\n    \"timestamp\": 1534729366900\n}",
            "title": "java\u63a5\u53e3"
        },
        {
            "location": "/api/#java",
            "text": "",
            "title": "\u4e0eJava\u540e\u53f0\u5b9a\u4e49\u7684\u63a5\u53e3"
        },
        {
            "location": "/api/#11",
            "text": "uri\uff1a/api/task/taskManage?methodname=queryTask\n\u65b9\u6cd5\u540d\uff1aqueryTask  \n\u652f\u6301\u7248\u672c\u53f7\uff1a1.0.0  \u8bf7\u6c42\u53c2\u6570\u8bf4\u660e\uff1a     \u540d\u79f0  \u5fc5\u586b  \u7c7b\u578b  \u8bf4\u660e      username  \u662f  string  \u76ee\u6807\u7cfb\u7edf\u8d26\u53f7    password  \u662f  string  \u5bc6\u7801    systemName  \u662f  string  \u7cfb\u7edf\u540d\u79f0\uff08\u9644\u88683\uff09    version  \u662f  string  \u7248\u672c\u53f7     \u8bf7\u6c42\u793a\u4f8b\uff1a  data:{\n    \"password\":\"123456\",\n    \"systemName\":\"iscm\",\n    \"version\":\"1.0.0\",\n    \"username\":\"zhangsan\"\n    }  \u8fd4\u56de\u793a\u4f8b\uff1a  {\n    \"msg\": \"success\",\n    \"code\": 0,\n    \"data\": {\n        \"password\": \"123456\",\n        \"systemName\": \"iscm\",\n        \"methodName\": \"queryzjsxDateByjrh\",\n        \"username\": \"zhangsan\",\n        \"params\": \"{\\\"jrh\\\":\"\",\\\"abc\\\":\"\"}\",\n        \"taskId\": \"1031354660771856384\"\n    },\n    \"timestamp\": 1534729089954\n}  \u6ce8\u610f\uff1a\u67e5\u8be2\u4efb\u52a1\u63a5\u53e3\u7531\u4e8e\u6709\u8d26\u53f7\u5bc6\u7801\u7b49\u654f\u611f\u4fe1\u606f\uff0c\u6240\u4ee5\u8981\u5bf9\u8bf7\u6c42\u53c2\u6570data\u7684\u503c\u8fdb\u884cAES 128\u4f4d\u52a0\u5bc6\uff0c\u52a0\u5bc6\u56e0\u5b50\u53cc\u65b9\u7ea6\u5b9a\uff0c\u6d4b\u8bd5\u73af\u5883\u6682\u65f6\u662f \"abcdefg\"",
            "title": "1.1 \u8f6e\u8be2\u4efb\u52a1\u63a5\u53e3"
        },
        {
            "location": "/api/#12",
            "text": "uri\uff1a/api/task/taskManage?methodname=sendTaskStatus  \n\u65b9\u6cd5\u540d\uff1asendTaskStatus  \n\u652f\u6301\u7248\u672c\u53f7\uff1a1.0.0  \n\u8bf7\u6c42\u53c2\u6570\u8bf4\u660e\uff1a     \u540d\u79f0  \u5fc5\u586b  \u7c7b\u578b  \u8bf4\u660e      taskId  \u662f  string  \u4efb\u52a1Id    taskStatus  \u662f  int  \u4efb\u52a1\u8fd0\u884c\u72b6\u6001 \uff08\u5177\u4f53\u89c1 \u9644\u88682\uff09    remark  \u5426  string  \u5907\u6ce8\uff08\u9519\u8bef\u539f\u56e0\u6216\u5176\u4ed6\uff0c\u53ef\u4e0d\u586b\uff09     \u8bf7\u6c42\u793a\u4f8b\uff1a  data:{\n    \"password\":\"123456\",\n    \"systemName\":\"iscm\",\n    \"version\":\"1.0.0\",\n    \"username\":\"zhangsan\",\n    \"params\":{\n        \"taskId\":\"1031355536785801217\",\n        \"taskStatus\":-1,\n        \"remark\":\"\u65e0\"\n        }\n    }  \u8fd4\u56de\u793a\u4f8b\uff1a  {\n    \"msg\": \"success\",\n    \"code\": 0,\n    \"timestamp\": 1534729366900\n}",
            "title": "1.2 \u673a\u5668\u4eba\u901a\u77e5\u4efb\u52a1\u72b6\u6001\u63a5\u53e3"
        },
        {
            "location": "/api/#13",
            "text": "uri\uff1a/api/task/taskManage?methodname=sendTaskData\n\u65b9\u6cd5\u540d\uff1asendTaskData\n\u652f\u6301\u7248\u672c\u53f7\uff1a1.0.0  \u8bf7\u6c42\u53c2\u6570\u8bf4\u660e\uff1a     \u540d\u79f0  \u5fc5\u586b  \u7c7b\u578b  \u8bf4\u660e      taskId  \u662f  string  \u4efb\u52a1Id    taskData  \u662f  string  \u4efb\u52a1\u6570\u636e\uff08json\u5b57\u7b26\u4e32\uff09    remark  \u5426  string  \u5907\u6ce8\uff08\u9519\u8bef\u539f\u56e0\u6216\u5176\u4ed6\uff0c\u53ef\u4e0d\u586b\uff09    \u8bf7\u6c42\u793a\u4f8b\uff1a        data:{\n    \"password\":\"123456\",\n    \"systemName\":\"iscm\",\n    \"version\":\"1.0.0\",\n    \"username\":\"zhangsan\",\n    \"params\":{\n        \"taskId\":\"1031355536785801217\",\n        \"taskData\":{\"zjsxDate\":\"2018-01-05\"},\n        \"remark\":\"\u65e0\"\n        }\n     }  \u8fd4\u56de\u793a\u4f8b\uff1a  {\n    \"msg\": \"success\",\n    \"code\": 0,\n    \"timestamp\": 1534729366900\n}",
            "title": "1.3 \u673a\u5668\u4eba\u56de\u63a8\u6570\u636e\u63a5\u53e3"
        },
        {
            "location": "/python/",
            "text": "\u672c\u8282\u5c06\u4f1a\u8bb2\u89e3OpenAPI\u4e09\u4e2a\u91cd\u8981\u7684\u7c7b\u53ca\u5b83\u529f\u80fd\n\u4e00\u4e9b\u8f85\u52a9\u7684\u63a5\u53e3\u5c06\u4f1a\u5728dowork\u4e2d\u4ecb\u7ecd\n\n\n\u9879\u76ee\u76ee\u5f55\n\n\nopenapi\n    \\api(\u5b58\u653e\u9879\u76ee\u7684\u4e1a\u52a1\u903b\u8f91)\n    \\common\uff08\u901a\u7528\u7684\u64cd\u4f5c\u51fd\u6570\uff09\n    \\decorators\uff08\u9879\u76ee\u8fd0\u884c\u4f7f\u7528\u7684\u88c5\u9970\u5668\uff09\n    \\doc\uff08\u6587\u6863\uff09\n    \\exception\uff08\u9519\u8bef\u5904\u7406\uff09\n    \\js\uff08js\u4ee3\u7801\uff08\u7528\u4e8e\u590d\u73b0js\u52a0\u5bc6\u8fc7\u7a0b\uff09\uff09\n    \\lib\uff08\u65e0\uff09\n    \\service\uff08\u670d\u52a1\u5668\u53cd\u5c04\u8c03\u7528\u539f\u51fd\u6570\u7684\u4e2d\u95f4\u7ad9\uff09\n    \\task\uff08\u628a\u4efb\u52a1\u8fdb\u884c\u53cd\u5c04\u8c03\u7528\u7684\u51fd\u6570\uff09\n    \\util\uff08\u653e\u7740\u4e00\u4e9b\u65e5\u5fd7\u5305\uff09\n    \\utils\uff08\u65e0\uff09\n    constant.py\uff08\u901a\u7528\u914d\u7f6e\uff09\n    main.py\uff08\u8fd0\u884c\u5165\u53e3\uff09\n\n\n\nbase_api\n\n\nclass BaseApi\n    \uff08\u767b\u5f55\u7c7b\uff09\n\n    def login\n        \u767b\u5f55\u91c7\u96c6\u7cfb\u7edf\u7684\u4e1a\u52a1\u903b\u8f91\n        return session\uff08\u5df2\u7ecf\u767b\u5f55\u5b8c\u6210\u7684session\uff09\n\n    def logout\n        \u9000\u51fa\u767b\u5f55\u7684\u65b9\u6cd5\n        pass\n\n    def is_session_expired\n        \u68c0\u67e5session\u662f\u5426\u8fc7\u671f\u7684\u65b9\u6cd5\n        return True or False\n\n\n\n\u793a\u4f8b:\n\n\n class item(BaseApi):\n    def login():\n        self.session.get(url\u767b\u5f55\u9875\u9762)\n        self.session.post(url\u6ce8\u518c\u9875\u9762)\n        return self.session\n\n\n\nservice\n\n\nclass BaseService(ABC)\n    \uff08\u53cd\u5c04\u7c7b\u7684\u4e2d\u95f4\u7ad9\uff0c\u6784\u9020\u57fa\u7840\u4efb\u52a1\uff0c\u8fd8\u6709\u56de\u63a8\u65b9\u6cd5\uff09\n\n    @abstractmethod\n    def api_var\n        \u83b7\u5f97\u4e1a\u52a1class\u7684\u5b9e\u4f8b\n        api = item(BaseApi)\n        return api\n\n    def success\n        \u4efb\u52a1\u6210\u529f\u7684\u56de\u63a8\u6570\u636e\u65b9\u6cd5\n        \u6784\u9020\u6210\u529f\u7684\u6570\u636e\n        self.task_util.send_task_data\uff08\u56de\u63a8\u6570\u636e\u7684\u65b9\u6cd5\uff09\n\n    def failure\n        \u4efb\u52a1\u5931\u8d25\u7684\u56de\u63a8\u6570\u636e\u65b9\u6cd5\n        \u6784\u9020\u5931\u8d25\u7684\u6570\u636e\n        self.task_util.send_task_data\uff08\u56de\u63a8\u6570\u636e\u7684\u65b9\u6cd5\uff09\n\n\n\n\u793a\u4f8b\n\uff1a\n\n\n class MssIct(BaseService):\n        def __init__(self, taskId, username, password, params, systemName, **kwargs):\n            super().__init__(taskId, username, password, params, systemName, **kwargs)\n\n        @service_exception_capture\n        def queryDemandEstimate(self):\n            \u4efb\u52a1\u7684methodname\u5bf9\u5e94\u51fd\u6570\u540dqueryDemandEstimate\n            return self.api.demand_estimate(**self.eval_params)\n\n\n\n\u7f16\u5199\u8fd9\u4e2a\u53cd\u5c04\u4e2d\u95f4\u7ad9\u7684\u65f6\u5019\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u7c7b\u540dMssIct\uff0c\u548c\u5bf9\u5e94\u7684\u6587\u4ef6\u540d\u5fc5\u987b\u662f\u4e00\u81f4\u7684\u3002\u56e0\u4e3atask\u8fdb\u884c\u53cd\u5c04\u8c03\u7528\u7684\u65f6\u5019\u662f\u6839\u636e\u7c7b\u540d\u7684\u5c0f\u5199\u3002\n\n\ntask\n\n\nclass TaskService\n    \uff08\u4efb\u52a1\u5904\u7406\u7c7b\uff09\n    def do_task\n        \uff08\u4ece\u540e\u53f0\u83b7\u53d6\u5230\u7684\u4efb\u52a1\uff09\n        \u6839\u636e\u4ece\u4efb\u52a1\u83b7\u53d6\u5230\u7684methodname\u3001systemname\u8fdb\u884c\u53cd\u5c04\u8c03\u7528\n        m = __import__('service.' + system_name.lower())\n        m2 = getattr(m, system_name.lower())\n        \u6240\u4ee5\u53cd\u5c04\u4e2d\u95f4\u7ad9\u7684\u6587\u4ef6\u540d\u662f\u7c7b\u540d\u7684\u5c0f\u5199\uff0c\u7c7b\u540d\u4e0esystemname\u4e00\u4e00\u5bf9\u5e94\n        \u6587\u4ef6\u5fc5\u987b\u653e\u5728service\u6587\u4ef6\u5939\u5185\n        obj = getattr(c(**dict(task)), method_name)\n        obj() \n        \u7136\u540e\u8c03\u7528\u53cd\u5c04\u4e2d\u95f4\u7ad9\u7684\u65b9\u6cd5\n\n\n\n\u8fd9\u5c31\u662fopenapi\u53cd\u5c04\u7684\u539f\u7406\n\n\u4e0b\u4e00\u8282\u6709\u5173\u5982\u4f55\u914d\u5408OpenAPI\u53bb\u5b8c\u6210\u4e00\u4e2a\u91c7\u96c6\u63a8\u9001\u6570\u636e\u7684\u8fc7\u7a0b\u7684",
            "title": "Python\u4f7f\u7528"
        },
        {
            "location": "/python/#_1",
            "text": "openapi\n    \\api(\u5b58\u653e\u9879\u76ee\u7684\u4e1a\u52a1\u903b\u8f91)\n    \\common\uff08\u901a\u7528\u7684\u64cd\u4f5c\u51fd\u6570\uff09\n    \\decorators\uff08\u9879\u76ee\u8fd0\u884c\u4f7f\u7528\u7684\u88c5\u9970\u5668\uff09\n    \\doc\uff08\u6587\u6863\uff09\n    \\exception\uff08\u9519\u8bef\u5904\u7406\uff09\n    \\js\uff08js\u4ee3\u7801\uff08\u7528\u4e8e\u590d\u73b0js\u52a0\u5bc6\u8fc7\u7a0b\uff09\uff09\n    \\lib\uff08\u65e0\uff09\n    \\service\uff08\u670d\u52a1\u5668\u53cd\u5c04\u8c03\u7528\u539f\u51fd\u6570\u7684\u4e2d\u95f4\u7ad9\uff09\n    \\task\uff08\u628a\u4efb\u52a1\u8fdb\u884c\u53cd\u5c04\u8c03\u7528\u7684\u51fd\u6570\uff09\n    \\util\uff08\u653e\u7740\u4e00\u4e9b\u65e5\u5fd7\u5305\uff09\n    \\utils\uff08\u65e0\uff09\n    constant.py\uff08\u901a\u7528\u914d\u7f6e\uff09\n    main.py\uff08\u8fd0\u884c\u5165\u53e3\uff09",
            "title": "\u9879\u76ee\u76ee\u5f55"
        },
        {
            "location": "/python/#base_api",
            "text": "class BaseApi\n    \uff08\u767b\u5f55\u7c7b\uff09\n\n    def login\n        \u767b\u5f55\u91c7\u96c6\u7cfb\u7edf\u7684\u4e1a\u52a1\u903b\u8f91\n        return session\uff08\u5df2\u7ecf\u767b\u5f55\u5b8c\u6210\u7684session\uff09\n\n    def logout\n        \u9000\u51fa\u767b\u5f55\u7684\u65b9\u6cd5\n        pass\n\n    def is_session_expired\n        \u68c0\u67e5session\u662f\u5426\u8fc7\u671f\u7684\u65b9\u6cd5\n        return True or False  \u793a\u4f8b:   class item(BaseApi):\n    def login():\n        self.session.get(url\u767b\u5f55\u9875\u9762)\n        self.session.post(url\u6ce8\u518c\u9875\u9762)\n        return self.session",
            "title": "base_api"
        },
        {
            "location": "/python/#service",
            "text": "class BaseService(ABC)\n    \uff08\u53cd\u5c04\u7c7b\u7684\u4e2d\u95f4\u7ad9\uff0c\u6784\u9020\u57fa\u7840\u4efb\u52a1\uff0c\u8fd8\u6709\u56de\u63a8\u65b9\u6cd5\uff09\n\n    @abstractmethod\n    def api_var\n        \u83b7\u5f97\u4e1a\u52a1class\u7684\u5b9e\u4f8b\n        api = item(BaseApi)\n        return api\n\n    def success\n        \u4efb\u52a1\u6210\u529f\u7684\u56de\u63a8\u6570\u636e\u65b9\u6cd5\n        \u6784\u9020\u6210\u529f\u7684\u6570\u636e\n        self.task_util.send_task_data\uff08\u56de\u63a8\u6570\u636e\u7684\u65b9\u6cd5\uff09\n\n    def failure\n        \u4efb\u52a1\u5931\u8d25\u7684\u56de\u63a8\u6570\u636e\u65b9\u6cd5\n        \u6784\u9020\u5931\u8d25\u7684\u6570\u636e\n        self.task_util.send_task_data\uff08\u56de\u63a8\u6570\u636e\u7684\u65b9\u6cd5\uff09  \u793a\u4f8b \uff1a   class MssIct(BaseService):\n        def __init__(self, taskId, username, password, params, systemName, **kwargs):\n            super().__init__(taskId, username, password, params, systemName, **kwargs)\n\n        @service_exception_capture\n        def queryDemandEstimate(self):\n            \u4efb\u52a1\u7684methodname\u5bf9\u5e94\u51fd\u6570\u540dqueryDemandEstimate\n            return self.api.demand_estimate(**self.eval_params)  \u7f16\u5199\u8fd9\u4e2a\u53cd\u5c04\u4e2d\u95f4\u7ad9\u7684\u65f6\u5019\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u7c7b\u540dMssIct\uff0c\u548c\u5bf9\u5e94\u7684\u6587\u4ef6\u540d\u5fc5\u987b\u662f\u4e00\u81f4\u7684\u3002\u56e0\u4e3atask\u8fdb\u884c\u53cd\u5c04\u8c03\u7528\u7684\u65f6\u5019\u662f\u6839\u636e\u7c7b\u540d\u7684\u5c0f\u5199\u3002",
            "title": "service"
        },
        {
            "location": "/python/#task",
            "text": "class TaskService\n    \uff08\u4efb\u52a1\u5904\u7406\u7c7b\uff09\n    def do_task\n        \uff08\u4ece\u540e\u53f0\u83b7\u53d6\u5230\u7684\u4efb\u52a1\uff09\n        \u6839\u636e\u4ece\u4efb\u52a1\u83b7\u53d6\u5230\u7684methodname\u3001systemname\u8fdb\u884c\u53cd\u5c04\u8c03\u7528\n        m = __import__('service.' + system_name.lower())\n        m2 = getattr(m, system_name.lower())\n        \u6240\u4ee5\u53cd\u5c04\u4e2d\u95f4\u7ad9\u7684\u6587\u4ef6\u540d\u662f\u7c7b\u540d\u7684\u5c0f\u5199\uff0c\u7c7b\u540d\u4e0esystemname\u4e00\u4e00\u5bf9\u5e94\n        \u6587\u4ef6\u5fc5\u987b\u653e\u5728service\u6587\u4ef6\u5939\u5185\n        obj = getattr(c(**dict(task)), method_name)\n        obj() \n        \u7136\u540e\u8c03\u7528\u53cd\u5c04\u4e2d\u95f4\u7ad9\u7684\u65b9\u6cd5  \u8fd9\u5c31\u662fopenapi\u53cd\u5c04\u7684\u539f\u7406 \n\u4e0b\u4e00\u8282\u6709\u5173\u5982\u4f55\u914d\u5408OpenAPI\u53bb\u5b8c\u6210\u4e00\u4e2a\u91c7\u96c6\u63a8\u9001\u6570\u636e\u7684\u8fc7\u7a0b\u7684",
            "title": "task"
        },
        {
            "location": "/work/",
            "text": "\u4ee5\u4e0b\u5c06\u4f1a\u5f15\u5bfc\u4f60\u4f7f\u7528OpenAPI\u5b8c\u6210\u4e00\u4e2a\u9879\u76ee\n\n\n\u5b9a\u4e49\u4e00\u4e2a\u4e1a\u52a1\u7c7b\n\n\n\u6587\u4ef6\u76ee\u5f55\nopenapi\n    \\api\n        \\ict\n            item.py\n\n\n\n\u5728api\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u9879\u76ee\u76ee\u5f55ict\uff0c\u518d\u5728\u91cc\u9762\u521b\u5efa\u9879\u76ee\u6587\u4ef6item.py\u3002\u5728\u6587\u4ef6\u91cc\u9762\u521b\u5efa\u4e1a\u52a1\u7c7bItem\n\n\nfrom api.base_api import BaseApi\nclass Item(BaseApi):\n    \u5b9e\u73b0\u767b\u5f55\u7684\u903b\u8f91\u65b9\u6cd5\n    def login(self):\n        return self.session\n    def logout(self):\n        pass\n    def is_session_expired(self):\n        r = self.session.get(\u4e3b\u9875)\n        return  '\u8d26\u53f7' not in r.text\n\n\n\n\u8fd9\u91ccItem\u7c7b\u7ee7\u627f\u4e86BaseApi,\u6240\u4ee5Item\u5fc5\u987b\u5b9e\u73b0\u4e09\u4e2a\u65b9\u6cd5\n\n\n@abstractmethod\ndef login(self):\n    raise RuntimeError(\"Login must be implementation!!\")\n@abstractmethod\ndef logout(self):\n    raise RuntimeError(\"Logout must be implementation!!\")\n@abstractmethod\ndef is_session_expired(self, session, **kwargs):\n    raise RuntimeError(\"Is_session_expired must be implementation!!\")\n\n\n\n\u6dfb\u52a0\u4e00\u4e2aauto\u767b\u5f55\u88c5\u9970\u5668\n\n\nfrom decorators.cls_decorator import auto_login_decorator\n@auto_login_decorator(expire_time=10, unit=UNIT_MINUTES)\nclass Item(BaseApi):\n\n\n\n\u8fd9\u4e2a\u88c5\u9970\u5668\n@auto_login_decorator\n\u5728\u751f\u6210\u5b9e\u4f8b\u7684\u65f6\u5019\u5c31\u4f1a\u8c03\u7528\nlogin\n\u65b9\u6cd5\u3002\u6240\u4ee5\u4e1a\u52a1\u7c7b\u7684\u8c03\u7528\u65b9\u6cd5\u6539\u53d8\u4e86\u3002\u7531\uff1a\n\n\nitem = Item(username=\"test\",password=\"test\")\nitem.login\uff08\uff09\n\u53d8\u6210\nitem = Item(username=\"test\",password=\"test\")\n\n\n\n\u5b9e\u73b0\u4e00\u4e2a\u4e1a\u52a1\u65b9\u6cd5\n\n\nclass Item(BaseApi):\n    ...\n    def load_test(self):\n        \u7f16\u5199\u4e1a\u52a1\u903b\u8f91do some thing\n        r = self.session.get(\u76ee\u5f55\u9875)\n        for url in \u8be6\u60c5\u9875\u5217\u8868\uff1a\n            r = self.session.get(url)\n            \u6784\u9020\u6570\u636e\u5b57\u5178\n        return  {\"load_test\":....}\n        \u8fd4\u56de\u5b57\u5178\u578b\u7684\u6570\u636e\uff08\u63a8\u9001\u6570\u636e\u65f6\u4f1a\u8f6c\u6210json\u6570\u636e\uff09\n\n\n\n\u5728OpenAPI\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u52a0\u8f7d\u4efb\u52a1\u7684\u65b9\u6cd5\n\n\n\u6dfb\u52a0\u88c5\u9970\u5668\n\n\n@exception_capture\n\u548c\n@session_checker\n\n\n@exception_capture\n@session_checker\ndef load_test(self):\n    ...\n\n\n\n@session_checker\n\u662f\u68c0\u6d4bsession\u662f\u5426\u8fc7\u671f\u7684\u88c5\u9970\u5668\uff0c\u5982\u679csession\u8fc7\u671f\u5c06\u4f1a\u91cd\u65b0\u767b\u5f55\u3002\n\n@exception_capture\n\u662f\u6355\u6349\u9519\u8bef\u7684\u88c5\u9970\u5668\uff0c\u7a0b\u5e8f\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u5f02\u5e38\u4f1a\u8bb0\u5f55\u5728log\u6587\u4ef6\u5185\u3002\n\u8fd0\u884c\u65e5\u5fd7\u9700\u8981\u81ea\u5df1\u624b\u52a8\u7f16\u7801\u4e86\u3002\n\n\n\u6784\u9020\u53cd\u5c04\u4e2d\u95f4\u7ad9\n\n\n\u6587\u4ef6\u76ee\u5f55\nopenapi\n    \\service\n        mssitem.py\n\n\n\n\u5728service\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u9879\u76ee\u6587\u4ef6mssitem.py\u3002\u5728\u6587\u4ef6\u91cc\u9762\u521b\u5efa\u4e2d\u95f4\u7c7bMssItem\n\n\nfrom service.base_service import BaseService\nfrom api.ict.item import Item\nclass MssIct(BaseService):\n    def __init__(self, taskId, username, password, params, systemName, **kwargs):\n        super().__init__(taskId, username, password, params, systemName, **kwargs)\n\n    @service_exception_capture\n    def loadTest(self):\n        return self.api.load_test(**self.eval_params)\n\n    @service_exception_capture\n    def api_var(self):\n        return Item(username=self.username, password=self.password)\n\n\n\n\n\n\u5bfc\u5165Item\u4e1a\u52a1\u7c7b\n\n\n\u5b9e\u73b0api_var\u7684\u65b9\u6cd5\uff0c\u8fd4\u56deItem\u4e1a\u52a1\u7c7b\u7684\u5b9e\u4f8b\n\n\n\u5b9e\u73b0loadTest\u7684\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u540d\u5bf9\u5e94Java\u540e\u53f0\u4f20\u5165\u7684\u53c2\u6570methodname\uff0c\u8fd4\u56de\u4e1a\u52a1\u7c7b\u7684\u65b9\u6cd5\u5373\u53ef\u3002\n\n\n\n\n\u6ce8\u518ctask\n\n\n\u6700\u540e\u5230task\u6587\u4ef6\u6dfb\u52a0\u8d26\u53f7\u4fe1\u606f\u5373\u53ef\n\n\ndef load_tasks():\npre_tasks = [\n    ...\n    {\"password\": \"123456\", \"systemName\": \"mssitem\", \"version\": \"1.0.0\", \"username\": \"test\"},\n]\n\n\n\n\u4e0b\u4e00\u8282\u4e3a\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879",
            "title": "dowork"
        },
        {
            "location": "/work/#_1",
            "text": "\u6587\u4ef6\u76ee\u5f55\nopenapi\n    \\api\n        \\ict\n            item.py  \u5728api\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u9879\u76ee\u76ee\u5f55ict\uff0c\u518d\u5728\u91cc\u9762\u521b\u5efa\u9879\u76ee\u6587\u4ef6item.py\u3002\u5728\u6587\u4ef6\u91cc\u9762\u521b\u5efa\u4e1a\u52a1\u7c7bItem  from api.base_api import BaseApi\nclass Item(BaseApi):\n    \u5b9e\u73b0\u767b\u5f55\u7684\u903b\u8f91\u65b9\u6cd5\n    def login(self):\n        return self.session\n    def logout(self):\n        pass\n    def is_session_expired(self):\n        r = self.session.get(\u4e3b\u9875)\n        return  '\u8d26\u53f7' not in r.text  \u8fd9\u91ccItem\u7c7b\u7ee7\u627f\u4e86BaseApi,\u6240\u4ee5Item\u5fc5\u987b\u5b9e\u73b0\u4e09\u4e2a\u65b9\u6cd5  @abstractmethod\ndef login(self):\n    raise RuntimeError(\"Login must be implementation!!\")\n@abstractmethod\ndef logout(self):\n    raise RuntimeError(\"Logout must be implementation!!\")\n@abstractmethod\ndef is_session_expired(self, session, **kwargs):\n    raise RuntimeError(\"Is_session_expired must be implementation!!\")",
            "title": "\u5b9a\u4e49\u4e00\u4e2a\u4e1a\u52a1\u7c7b"
        },
        {
            "location": "/work/#auto",
            "text": "from decorators.cls_decorator import auto_login_decorator\n@auto_login_decorator(expire_time=10, unit=UNIT_MINUTES)\nclass Item(BaseApi):  \u8fd9\u4e2a\u88c5\u9970\u5668 @auto_login_decorator \u5728\u751f\u6210\u5b9e\u4f8b\u7684\u65f6\u5019\u5c31\u4f1a\u8c03\u7528 login \u65b9\u6cd5\u3002\u6240\u4ee5\u4e1a\u52a1\u7c7b\u7684\u8c03\u7528\u65b9\u6cd5\u6539\u53d8\u4e86\u3002\u7531\uff1a  item = Item(username=\"test\",password=\"test\")\nitem.login\uff08\uff09\n\u53d8\u6210\nitem = Item(username=\"test\",password=\"test\")",
            "title": "\u6dfb\u52a0\u4e00\u4e2aauto\u767b\u5f55\u88c5\u9970\u5668"
        },
        {
            "location": "/work/#_2",
            "text": "class Item(BaseApi):\n    ...\n    def load_test(self):\n        \u7f16\u5199\u4e1a\u52a1\u903b\u8f91do some thing\n        r = self.session.get(\u76ee\u5f55\u9875)\n        for url in \u8be6\u60c5\u9875\u5217\u8868\uff1a\n            r = self.session.get(url)\n            \u6784\u9020\u6570\u636e\u5b57\u5178\n        return  {\"load_test\":....}\n        \u8fd4\u56de\u5b57\u5178\u578b\u7684\u6570\u636e\uff08\u63a8\u9001\u6570\u636e\u65f6\u4f1a\u8f6c\u6210json\u6570\u636e\uff09  \u5728OpenAPI\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u52a0\u8f7d\u4efb\u52a1\u7684\u65b9\u6cd5",
            "title": "\u5b9e\u73b0\u4e00\u4e2a\u4e1a\u52a1\u65b9\u6cd5"
        },
        {
            "location": "/work/#_3",
            "text": "@exception_capture \u548c @session_checker  @exception_capture\n@session_checker\ndef load_test(self):\n    ...  @session_checker \u662f\u68c0\u6d4bsession\u662f\u5426\u8fc7\u671f\u7684\u88c5\u9970\u5668\uff0c\u5982\u679csession\u8fc7\u671f\u5c06\u4f1a\u91cd\u65b0\u767b\u5f55\u3002 @exception_capture \u662f\u6355\u6349\u9519\u8bef\u7684\u88c5\u9970\u5668\uff0c\u7a0b\u5e8f\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u5f02\u5e38\u4f1a\u8bb0\u5f55\u5728log\u6587\u4ef6\u5185\u3002\n\u8fd0\u884c\u65e5\u5fd7\u9700\u8981\u81ea\u5df1\u624b\u52a8\u7f16\u7801\u4e86\u3002",
            "title": "\u6dfb\u52a0\u88c5\u9970\u5668"
        },
        {
            "location": "/work/#_4",
            "text": "\u6587\u4ef6\u76ee\u5f55\nopenapi\n    \\service\n        mssitem.py  \u5728service\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u9879\u76ee\u6587\u4ef6mssitem.py\u3002\u5728\u6587\u4ef6\u91cc\u9762\u521b\u5efa\u4e2d\u95f4\u7c7bMssItem  from service.base_service import BaseService\nfrom api.ict.item import Item\nclass MssIct(BaseService):\n    def __init__(self, taskId, username, password, params, systemName, **kwargs):\n        super().__init__(taskId, username, password, params, systemName, **kwargs)\n\n    @service_exception_capture\n    def loadTest(self):\n        return self.api.load_test(**self.eval_params)\n\n    @service_exception_capture\n    def api_var(self):\n        return Item(username=self.username, password=self.password)   \u5bfc\u5165Item\u4e1a\u52a1\u7c7b  \u5b9e\u73b0api_var\u7684\u65b9\u6cd5\uff0c\u8fd4\u56deItem\u4e1a\u52a1\u7c7b\u7684\u5b9e\u4f8b  \u5b9e\u73b0loadTest\u7684\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u540d\u5bf9\u5e94Java\u540e\u53f0\u4f20\u5165\u7684\u53c2\u6570methodname\uff0c\u8fd4\u56de\u4e1a\u52a1\u7c7b\u7684\u65b9\u6cd5\u5373\u53ef\u3002",
            "title": "\u6784\u9020\u53cd\u5c04\u4e2d\u95f4\u7ad9"
        },
        {
            "location": "/work/#task",
            "text": "\u6700\u540e\u5230task\u6587\u4ef6\u6dfb\u52a0\u8d26\u53f7\u4fe1\u606f\u5373\u53ef  def load_tasks():\npre_tasks = [\n    ...\n    {\"password\": \"123456\", \"systemName\": \"mssitem\", \"version\": \"1.0.0\", \"username\": \"test\"},\n]  \u4e0b\u4e00\u8282\u4e3a\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879",
            "title": "\u6ce8\u518ctask"
        },
        {
            "location": "/about/",
            "text": "\u6ce8\u610f\u4e8b\u9805\n\n\n\n\n\n\n\u6240\u6709\u9700\u8981\u767b\u9646\u7684\u6a21\u5757\u90fd\u8981\u7ee7\u627f\nBaseApi\n\u4e14\u5b9e\u73b0\nlogin,logout,is_session_expire\n\u4e09\u4e2a\u65b9\u6cd5.     \n\n\n\n\nlogin\n\u5fc5\u987b\u8fd4\u56de\u767b\u9646\u6210\u529f\u7684\nsession\n\u3002  \n\n\nlogout\n\u987b\u5148\u8c03\u7528\u7cfb\u7edf\u7684\u767b\u51fa\u8bf7\u6c42\u518d\nsession.closei()\n  \n\n\ns_session_expire\n\u8fd4\u56de\nTrue\n\u5219\u8868\u660e\nsession\n\u8fc7\u671f\u3002\n\n\n\n\n\n\n\n\n\u6240\u6709\nservice\n\u5fc5\u987b\u7ee7\u627f\nBaseService\n\u7c7b\u4e14\u5b9e\u73b0\napi_var()\n\u65b9\u6cd5\n\n\n\n\napi_var\n\u5fc5\u987b\u8fd4\u56de\u5bf9\u5e94\u7684\napi\n\u7c7b\u3002\n\n\n\n\n\n\n\n\n\u5982\u679c\nApi\n\u7c7b\u7ee7\u627f\u4e86\nBaseApi\n\uff0c\u5219\u88ab\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\nusername,password\n\u5fc5\u586b\u4e14\u683c\u5f0f\u5fc5\u987b\u4e3a\nApi(username=\"zhangsan\",password=\"pwd\")\n,\u4e0d\u53ef\u5199\u4e3a\nApi(\"zhangsan\",\"pwd\")\n\n\n\n\n\n\n\u6240\u6709\nservice\n\u7c7b\u7684\u65b9\u6cd5\u7528@service_exception_decorator\u88c5\u9970\u5668\u4fee\u9970\uff0c\u4e0d\u7528\u989d\u5916try catch\uff0c\u4e14\u65b9\u6cd5\u5e94\u76f4\u63a5\u8fd4\u56deapi\u7684\u6570\u636e\uff0c\nservice\n\u8c03\u7528\napi\n\u65b9\u6cd5\u9700\u8981\u4f20\u53c2\u7684\u65f6\u5019\u53c2\u6570\u76f4\u63a5\u5199\nself.eval_params\n\uff1a\n\napi.method(**self.eval_params)\n\n\n\n\n\n\n\u6240\u6709\u76f8\u5173\nApi\n\u7c7b\u7684\u65b9\u6cd5\u5e94\u8fd4\u56de\njson\n\u6570\u636e\uff0c\u5982\u679c\u9700\u8981\u7ef4\u6301\nsession\n\u5219\u9700\u8981\u4f7f\u7528\n@auto_login_decorator\n\u88c5\u9970\u5668\u4fee\u9970\u7c7b\uff0c\u65b9\u6cd5\u5904\u5e94\u4f7f\u7528\n@exception_capture\n\u548c\n@session_checker\n\u88c5\u9970\u5668\u4fee\u9970\u5bf9\u5e94\u7684\u4e1a\u52a1\u65b9\u6cd5\u3002\n\u4e14\u4e1a\u52a1\u65b9\u6cd5\u4e5f\u65e0\u987b\u989d\u5916\ntry catch\n\u3002\n\n\n\n\n@auto_login_decorator\n\u88c5\u9970\u5668\u67093\u4e2a\u53ef\u9009\u53c2\u6570\uff1a\nexpire_time\uff0cunit\u3002\n\u5206\u522b\u4ee3\u8868\u8d85\u65f6\u65f6\u95f4\u4e0e\u5355\u4f4d\uff0c\u9ed8\u8ba4\u4e3a3\u5206\u949f\u3002\u53e6\u5916\u5982\u679c\u6709\ntoken\n\u7b49\u540e\u7eed\u8bf7\u6c42\u5fc5\u586b\u7684\u5b57\u6bb5\u8bf7\u6c42\uff0c\u5219\u53ef\u4ee5\u518d\u52a0\u4e0a\nkey=method\n\uff0c\u5728\n__init__\n\u5904\u83b7\u53d6\u3002\u4f8b\u5b50\uff0c\u67d0\u4e2a\u7cfb\u7edf\u9700\u8981\u4e00\u4e2a\u540d\u4e3a\ntoken\n\u7684\u5b57\u6bb5\u4f5c\u4e3a\u540e\u7eed\u8bf7\u6c42\u7684\nheader\n\u5fc5\u586b\u503c\uff0c\u5219\uff1a\n\n\n\n\n\n\n\n\n@auto_login_decorator(expire_time=10, unit=UNIT_MINUTES, token=\"get_token\")\nclass TestApi(BaseApi):\n    def __init__(self, username, password):\n        super().__init__(username, password)\n        self.open_token = self._.get(\"token\", \"\")\n    def login(self):\n        # do login\n        pass\n\n    def logout(self):\n        pass\n\n    def is_session_expired(self, session, **kwargs):\n        pass\n\n    def get_token(self):\n        # do request token thing\n        return \"token\"\n\n\n\n\n\u4f20\u5165\u7684\ntoken=\"get_token\"\n \ntoken\n\u4e3a\nkey\n,\nget_token\n\u4e3a\u5bf9\u5e94\u7684\u65b9\u6cd5\uff0c\n__init__\n\u76f4\u63a5\nselt._.get(\"token\")\n\u5219\u53ef\u4ee5\u83b7\u53d6\u5230\u5bf9\u5e94\u7684\u5168\u5c40\ntoken\n\u503c\u3002",
            "title": "about"
        },
        {
            "location": "/about/#_1",
            "text": "\u6240\u6709\u9700\u8981\u767b\u9646\u7684\u6a21\u5757\u90fd\u8981\u7ee7\u627f BaseApi \u4e14\u5b9e\u73b0 login,logout,is_session_expire \u4e09\u4e2a\u65b9\u6cd5.        login \u5fc5\u987b\u8fd4\u56de\u767b\u9646\u6210\u529f\u7684 session \u3002    logout \u987b\u5148\u8c03\u7528\u7cfb\u7edf\u7684\u767b\u51fa\u8bf7\u6c42\u518d session.closei()     s_session_expire \u8fd4\u56de True \u5219\u8868\u660e session \u8fc7\u671f\u3002     \u6240\u6709 service \u5fc5\u987b\u7ee7\u627f BaseService \u7c7b\u4e14\u5b9e\u73b0 api_var() \u65b9\u6cd5   api_var \u5fc5\u987b\u8fd4\u56de\u5bf9\u5e94\u7684 api \u7c7b\u3002     \u5982\u679c Api \u7c7b\u7ee7\u627f\u4e86 BaseApi \uff0c\u5219\u88ab\u5b9e\u4f8b\u5316\u7684\u65f6\u5019 username,password \u5fc5\u586b\u4e14\u683c\u5f0f\u5fc5\u987b\u4e3a Api(username=\"zhangsan\",password=\"pwd\") ,\u4e0d\u53ef\u5199\u4e3a Api(\"zhangsan\",\"pwd\")    \u6240\u6709 service \u7c7b\u7684\u65b9\u6cd5\u7528@service_exception_decorator\u88c5\u9970\u5668\u4fee\u9970\uff0c\u4e0d\u7528\u989d\u5916try catch\uff0c\u4e14\u65b9\u6cd5\u5e94\u76f4\u63a5\u8fd4\u56deapi\u7684\u6570\u636e\uff0c service \u8c03\u7528 api \u65b9\u6cd5\u9700\u8981\u4f20\u53c2\u7684\u65f6\u5019\u53c2\u6570\u76f4\u63a5\u5199 self.eval_params \uff1a api.method(**self.eval_params)    \u6240\u6709\u76f8\u5173 Api \u7c7b\u7684\u65b9\u6cd5\u5e94\u8fd4\u56de json \u6570\u636e\uff0c\u5982\u679c\u9700\u8981\u7ef4\u6301 session \u5219\u9700\u8981\u4f7f\u7528 @auto_login_decorator \u88c5\u9970\u5668\u4fee\u9970\u7c7b\uff0c\u65b9\u6cd5\u5904\u5e94\u4f7f\u7528 @exception_capture \u548c @session_checker \u88c5\u9970\u5668\u4fee\u9970\u5bf9\u5e94\u7684\u4e1a\u52a1\u65b9\u6cd5\u3002\n\u4e14\u4e1a\u52a1\u65b9\u6cd5\u4e5f\u65e0\u987b\u989d\u5916 try catch \u3002   @auto_login_decorator \u88c5\u9970\u5668\u67093\u4e2a\u53ef\u9009\u53c2\u6570\uff1a expire_time\uff0cunit\u3002 \u5206\u522b\u4ee3\u8868\u8d85\u65f6\u65f6\u95f4\u4e0e\u5355\u4f4d\uff0c\u9ed8\u8ba4\u4e3a3\u5206\u949f\u3002\u53e6\u5916\u5982\u679c\u6709 token \u7b49\u540e\u7eed\u8bf7\u6c42\u5fc5\u586b\u7684\u5b57\u6bb5\u8bf7\u6c42\uff0c\u5219\u53ef\u4ee5\u518d\u52a0\u4e0a key=method \uff0c\u5728 __init__ \u5904\u83b7\u53d6\u3002\u4f8b\u5b50\uff0c\u67d0\u4e2a\u7cfb\u7edf\u9700\u8981\u4e00\u4e2a\u540d\u4e3a token \u7684\u5b57\u6bb5\u4f5c\u4e3a\u540e\u7eed\u8bf7\u6c42\u7684 header \u5fc5\u586b\u503c\uff0c\u5219\uff1a     @auto_login_decorator(expire_time=10, unit=UNIT_MINUTES, token=\"get_token\")\nclass TestApi(BaseApi):\n    def __init__(self, username, password):\n        super().__init__(username, password)\n        self.open_token = self._.get(\"token\", \"\")\n    def login(self):\n        # do login\n        pass\n\n    def logout(self):\n        pass\n\n    def is_session_expired(self, session, **kwargs):\n        pass\n\n    def get_token(self):\n        # do request token thing\n        return \"token\"  \u4f20\u5165\u7684 token=\"get_token\"   token \u4e3a key , get_token \u4e3a\u5bf9\u5e94\u7684\u65b9\u6cd5\uff0c __init__ \u76f4\u63a5 selt._.get(\"token\") \u5219\u53ef\u4ee5\u83b7\u53d6\u5230\u5bf9\u5e94\u7684\u5168\u5c40 token \u503c\u3002",
            "title": "\u6ce8\u610f\u4e8b\u9805"
        }
    ]
}